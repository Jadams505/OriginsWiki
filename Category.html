<!DOCTYPE HTML>
<html lang="en">
	<head>
		<script>
			var catName = window.location.search.substring(1);
			function preParseCallback(){
				var firstHeader = document.getElementsByTagName("h1");
				firstHeader[0].innerText = 'Category: '+catName;
			}
			async function postParseCallback(ev){
				var content = document.getElementById('content');
				var category = (await getCategories()).filter((v)=>v.name === catName)[0];
				var siteMap = await getSiteMap();
				var allPages = [];
				for(var i0 = 0; i0 < siteMap.children[0].children.length; i0++){
					var child = siteMap.children[0].children[i0];
					for(var i1 = 0; i1 < child.children.length; i1++){
						if(child.children[i1].tagName === 'loc'){
							var pageName = child.children[i1].firstChild.nodeValue.split('/');
							pageName = pageName[pageName.length - 1].replaceAll('.html', '') || 'index';
							allPages.push(pageName.replaceAll('.html', ''));
							break;
						}
					}
				}
				
				var catContents = '';
				for (var i = 0; i < allPages.length; i++) {
					if(category.items.includes(allPages[i]) ^ category.blacklist){
						catContents += `<div class="catitem"><a href="${allPages[i]+linkSuffix}">${allPages[i]}</a></div>`;
					}
				}

				content.innerHTML += catContents;
			};
		</script>
		<script src="automarkdown.js" defer></script>
		<script>
		</script>
		<link rel="stylesheet" href="styling.css"></link>
	</head>
	<body>
		<article id="content">
			<h1>Category: </h1>
			<div class="divider"></div>

		</article>
	</body>
</html>